# Поздравлятор

Веб-приложение для ведения списка дней рождения друзей, знакомых и сотрудников.

## Функциональность

- Отображение всего списка дней рождения с сортировкой
- Отображение сегодняшних и ближайших дней рождения (на 30 дней вперед)
- Добавление новых записей с фотографиями
- Редактирование существующих записей
- Удаление записей
- Визуальное выделение сегодняшних и просроченных дней рождения
- Сортировка по дням до ДР, имени или дате рождения
- Хранение и отображение фотографий именинников

## Технологии

- Java 17
- Spring Boot 3.2.0
- PostgreSQL
- Flyway (миграции БД)
- Thymeleaf
- Bootstrap 5
- Maven

## Требования

- Java 17 или выше
- Maven 3.6+
- PostgreSQL 12+

1. **Создание базы данных PostgreSQL:**

   Выполните скрипт из `main/resources/db/scripts/01_create_database.sql`:
   ```bash
   psql -U postgres -f main/resources/db/scripts/01_create_database.sql
   ```

2. **Настройка подключения к БД** в файле `main/resources/application.properties`:
   ```properties
   spring.datasource.url=jdbc:postgresql://localhost:5432/birthdaydb
   spring.datasource.username=postgres
   spring.datasource.password=your_password
   ```

3. **Сборка проекта:**
   ```bash
   mvn clean install
   ```

4. **Запуск приложения:**
   ```bash
   mvn spring-boot:run
   ```
   При первом запуске Flyway автоматически выполнит миграции и создаст необходимые таблицы.

5. **Работа в браузере:**
   Откройте в браузере 
   ```
   http://localhost:8080
   ```

## Миграции базы данных

Проект использует **Flyway** для управления миграциями базы данных. Миграции выполняются автоматически при запуске приложения.

### Структура миграций

- `V1__Create_birthdays_table.sql` - создание основной таблицы `birthdays`
- `V2__Add_updated_at_trigger.sql` - добавление триггера для автоматического обновления `updated_at`

### Ручное выполнение миграций

Если нужно выполнить миграции вручную:

```bash
mvn flyway:migrate
```

## Использование

- **Главная страница (/)**: Отображает сегодняшние и ближайшие дни рождения
- **Все дни рождения (/all)**: Полный список всех дней рождения
- **Добавить (/add)**: Форма для добавления нового дня рождения
- **Редактировать (/edit/{id})**: Форма для редактирования существующего дня рождения
- **Удалить**: Кнопка удаления на карточках дней рождения